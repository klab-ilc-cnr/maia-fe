<div class="grid">
	<div class="col-12">
		<div class="card">
      <div class="page-header">
        <h5>
          <div *ngIf="isEditUser(); else elseBlock">Dettaglio utente</div>
          <ng-template #elseBlock>Nuovo utente</ng-template>
        </h5>
      </div>
      <div class="card-body p-fluid">
        <form (ngSubmit)="onSubmit()" #userForm="ngForm">
          <div class="form-group">
            <label for="name">Nome</label>
            <input type="text" [(ngModel)]="user.name"
                   class="form-control"
                   id="name"
                   name="name"
                   placeholder="Inserisci il tuo nome"
                   required #name="ngModel">
            <div [hidden]="!name.pristine" class="alert alert-danger">Il nome è obbligatorio</div>
          </div>
          <div class="form-group">
            <label for="surname">Cognome</label>
            <input type="text" [(ngModel)]="user.surname"
                   class="form-control"
                   id="surname"
                   name="surname"
                   placeholder="Inserisci il tuo cognome"
                   required #surname="ngModel">
            <div [hidden]="!surname.pristine" class="alert alert-danger">Il cognome è obbligatorio</div>
          </div>
          <div class="form-group">
            <label for="email">Email</label>
            <input type="text" [(ngModel)]="user.email"
                   class="form-control"
                   id="email"
                   name="email"
                   placeholder="Inserisci il tuo indirizzo email"
                   required #email="ngModel">
            <div [hidden]="!email.pristine" class="alert alert-danger">L'email è obbligatoria</div>
          </div>
          <div class="form-group">
            <label for="role">Ruolo</label>
            <p-dropdown #role="ngModel" name="role" [(ngModel)]="user.role"
              [options]="roles" [filter]="true" [showClear]="true"
              placeholder="Scegli un ruolo" [required]="true"
              [disabled]="!roles">
            </p-dropdown>
            <div *ngIf="role.invalid"
              class="alert alert-danger">
              Il ruolo è obbligatorio
            </div>
          </div>
          <div class="form-group d-flex align-items-center">
            <label for="active">Utente attivo</label>
            <p-inputSwitch #active="ngModel" name="active" [(ngModel)]="user.active"></p-inputSwitch>
          </div>
          <div class="text-end">
            <button type="button" (click)="goToUserList()"
                    class="btn btn-secondary ms-auto">Annulla</button>
            <button type="submit" [disabled]="!userForm.form.valid"
                    class="btn btn-danger ms-2">Salva</button>
          </div>
        </form>
      </div>
		</div>
	</div>
</div>
